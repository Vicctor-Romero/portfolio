---
// src/components/Header.astro
---
<header class="absolute top-0 left-0 w-full z-50 p-4">
  <div class="container mx-auto flex justify-between items-center">

    <a href="/" class="text-xl font-bold flex items-center gap-2 text-white hover:text-blue-400 transition-colors">
      <img 
      src="https://res.cloudinary.com/dqkckcvl0/image/upload/v1753825897/VR_afn6h2.png" 
      alt="Victor Romero Logo" 
      class="w-10 h-10 rounded-lg"
    />
      <span class=" text-xl font-bold text-white hover:text-blue-400 transition-colors">Victor Romero</span>
    </a>
    
    <!-- Desktop Navigation -->
    <nav class="hidden md:flex items-center space-x-6">
      <a href="/projects" class="text-gray-300 hover:text-white transition-colors font-medium" data-i18n="nav.projects">Projects</a>
      <a href="/about" class="text-gray-300 hover:text-white transition-colors font-medium" data-i18n="nav.about">About</a>
      <a href="/contact" class="text-gray-300 hover:text-white transition-colors font-medium" data-i18n="nav.contact">Contact</a>
    </nav>
    
    <!-- Desktop CTA & Language Toggle -->
    <div class="hidden lg:flex items-center space-x-3">
      <!-- Round Language Toggle -->
      <button 
        id="language-toggle"
        class="w-10 h-10 bg-gray-800 hover:bg-gray-700 rounded-full flex items-center justify-center text-gray-300 hover:text-white transition-colors group"
        aria-label="Toggle language"
      >
        <span id="current-language" class="text-sm font-medium">EN</span>
      </button>
      
      <!-- CTA Button -->
      <a 
        href="/contact"
        class="bg-blue-600 hover:bg-blue-700 text-white font-semibold px-5 py-2 rounded-lg transition-colors"
        data-i18n="nav.cta"
      >
        Get In Touch
      </a>
    </div>

    <!-- Mobile Menu Button -->
    <button 
      id="mobile-menu-button"
      class="md:hidden text-white hover:text-blue-400 transition-colors"
      aria-label="Toggle mobile menu"
    >
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
      </svg>
    </button>
  </div>

  <!-- Mobile Navigation Menu -->
  <div 
    id="mobile-menu" 
    class="md:hidden absolute top-full left-0 w-full bg-gray-900/95 backdrop-blur-sm border-t border-gray-800 transform -translate-y-full opacity-0 invisible transition-all duration-300"
  >
    <nav class="container mx-auto py-6 px-4">
      <div class="flex flex-col space-y-4">
        <a href="/projects" class="text-gray-300 hover:text-white transition-colors font-medium py-2 border-b border-gray-800" data-i18n="nav.projects">Projects</a>
        <a href="/about" class="text-gray-300 hover:text-white transition-colors font-medium py-2 border-b border-gray-800" data-i18n="nav.about">About</a>
        <a href="/contact" class="text-gray-300 hover:text-white transition-colors font-medium py-2 border-b border-gray-800" data-i18n="nav.contact">Contact</a>
        
        <!-- Mobile Language Toggle -->
        <div class="flex items-center justify-center py-2 border-b border-gray-800">
          <button 
            id="mobile-language-toggle"
            class="w-10 h-10 bg-gray-800 hover:bg-gray-700 rounded-full flex items-center justify-center text-gray-300 hover:text-white transition-colors"
            aria-label="Toggle language"
          >
            <span id="mobile-current-language" class="text-sm font-medium">EN</span>
          </button>
        </div>
        
        <a 
          href="/contact" 
          class="bg-blue-600 hover:bg-blue-700 text-white font-semibold px-5 py-3 rounded-lg transition-colors text-center mt-4"
          data-i18n="nav.cta"
        >
          Get In Touch
        </a>
      </div>
    </nav>
  </div>
</header>

<script>
  // Translation system
  const translations: {[key: string]: {[key: string]: string}} = {
    en: {
      'nav.projects': 'Projects',
      'nav.about': 'About',
      'nav.contact': 'Contact',
      'nav.cta': 'Get In Touch',
      'hero.greeting': "Hello, I'm",
      'hero.description': "I build robust and scalable web applications, tailored to your specific needs. I achieve this by collaborating closely with you to understand your goals and build a digital solution that not only performs perfectly but also faithfully represents your project's unique identity.",
      'hero.stats.years': 'Years Exp',
      'hero.stats.projects': 'Projects',
      'hero.stats.satisfaction': 'Satisfaction',
      'hero.cta.projects': 'View My Projects',
      'hero.cta.contact': "Let's Talk",
      'footer.tagline': 'Creative Software Developer',
      'footer.description': 'Building innovative digital experiences with modern technologies. Let\'s create something amazing together.',
      'footer.navigation': 'Navigation',
      'footer.nav.home': 'Home',
      'footer.nav.about': 'About',
      'footer.nav.projects': 'Projects',
      'footer.nav.contact': 'Contact',
      'footer.contact.title': 'Get In Touch',
      'footer.contact.location': 'Available for remote work',
      'footer.contact.availability': 'Mon - Fri, 9AM - 6PM',
      'footer.copyright.text': '© 2025 Victor Romero. All rights reserved.',
      'footer.made_with': 'Made with',
      // Projects page
      'projects.title': 'My Projects',
      'projects.subtitle': 'A showcase of my recent work and creative projects that demonstrate my skills and passion for development.',
      'projects.featured': 'Featured Project',
      'projects.cube.title': '3D Rubik\'s Cube',
      'projects.cube.description': 'Interactive 3D Rubik\'s cube with realistic animations, smooth rotations, and intelligent auto-scrambling. Built with React Three Fiber for optimal performance.',
      'projects.cube.view_details': 'View Project Details',
      'projects.view_code': 'View Code',
      'projects.coming_soon.title': 'More Projects Coming Soon',
      'projects.coming_soon.description': 'I\'m constantly working on new and exciting projects. Stay tuned for more innovative web applications and creative solutions.',
      // Project individual page
      'breadcrumb.projects': 'Projects',
      'project.cube.breadcrumb': '3D Rubik\'s Cube',
      'project.featured': 'Featured Project',
      'project.cube.title': 'Interactive 3D Rubik\'s Cube',
      'project.cube.hero_description': 'A fully interactive 3D Rubik\'s cube simulator featuring realistic physics, smooth animations, and intelligent auto-scrambling algorithms.',
      'project.view_github': 'View on GitHub',
      'project.live_demo': 'Live Demo',
      'project.problem.title': 'The Challenge',
      'project.cube.problem': 'Creating a realistic 3D Rubik\'s cube that maintains 60fps performance while handling complex rotation algorithms and state management for 27 individual cubes with smooth animations.',
      'project.solution.title': 'The Solution',
      'project.cube.solution': 'Used React Three Fiber for optimized 3D rendering, implemented custom easing functions for smooth animations, and created an efficient state management system with direct object manipulation.',
      'project.features.title': 'Key Features',
      'project.cube.features.smooth_rotations': 'Smooth Rotations',
      'project.cube.features.smooth_desc': '60fps animations with custom easing functions for realistic cube movements',
      'project.cube.features.realistic_colors': 'Realistic Colors',
      'project.cube.features.colors_desc': 'Authentic Rubik\'s cube color scheme with proper face coloring logic',
      'project.cube.features.auto_scramble': 'Auto Scrambling',
      'project.cube.features.scramble_desc': 'Intelligent scrambling algorithm that creates solvable configurations',
      'project.cube.features.orbit_controls': 'Orbit Controls',
      'project.cube.features.controls_desc': 'Intuitive camera controls for exploring the cube from any angle',
      'project.cube.features.responsive': 'Responsive Design',
      'project.cube.features.responsive_desc': 'Optimized for all screen sizes from mobile to desktop',
      'project.cube.features.performance': 'High Performance',
      'project.cube.features.performance_desc': 'Optimized rendering and state management for consistent 60fps',
      'project.technical.title': 'Technical Implementation',
      'project.technical.architecture': 'Architecture',
      'project.cube.tech.react_fiber': 'React Three Fiber for 3D rendering',
      'project.cube.tech.state_management': 'Efficient state management with useRef',
      'project.cube.tech.direct_manipulation': 'Direct Three.js object manipulation',
      'project.cube.tech.custom_easing': 'Custom easing functions for animations',
      'project.technical.highlights': 'Key Highlights',
      'project.cube.highlights.60fps': 'Consistent 60fps performance',
      'project.cube.highlights.27_cubes': '27 individual cube management',
      'project.cube.highlights.smooth_transitions': 'Smooth rotation transitions',
      'project.cube.highlights.memory_efficient': 'Memory-efficient rendering',
      'project.back_to_projects': 'Back to Projects',
      'project.more_coming': 'More projects coming soon!'
    },
    es: {
      'nav.projects': 'Proyectos',
      'nav.about': 'Acerca de',
      'nav.contact': 'Contacto',
      'nav.cta': 'Contáctame',
      'hero.greeting': 'Hola, soy',
      'hero.description': 'Creo aplicaciones web robustas y escalables, diseñadas a la medida de tus necesidades. Para lograrlo, colaboro estrechamente contigo para entender tus metas y construir una solución digital que no solo funcione a la perfección, sino que represente fielmente la identidad única de tu proyecto.',
      'hero.stats.years': 'Años Exp',
      'hero.stats.projects': 'Proyectos',
      'hero.stats.satisfaction': 'Satisfacción',
      'hero.cta.projects': 'Ver Mis Proyectos',
      'hero.cta.contact': 'Hablemos',
      'footer.tagline': 'Desarrollador de Software Creativo',
      'footer.description': 'Creando experiencias digitales innovadoras con tecnologías modernas. Vamos a crear algo increíble juntos.',
      'footer.navigation': 'Navegación',
      'footer.nav.home': 'Inicio',
      'footer.nav.about': 'Acerca de',
      'footer.nav.projects': 'Proyectos',
      'footer.nav.contact': 'Contacto',
      'footer.contact.title': 'Contáctame',
      'footer.contact.location': 'Disponible para trabajo remoto',
      'footer.contact.availability': 'Lun - Vie, 9AM - 6PM',
      'footer.copyright.text': '© 2025 Victor Romero. Todos los derechos reservados.',
      'footer.made_with': 'Hecho con',
      // Projects page
      'projects.title': 'Mis Proyectos',
      'projects.subtitle': 'Una muestra de mi trabajo reciente y proyectos creativos que demuestran mis habilidades y pasión por el desarrollo.',
      'projects.featured': 'Proyecto Destacado',
      'projects.cube.title': 'Cubo de Rubik 3D',
      'projects.cube.description': 'Cubo de Rubik 3D interactivo con animaciones realistas, rotaciones suaves y algoritmo inteligente de scrambling. Construido con React Three Fiber para rendimiento óptimo.',
      'projects.cube.view_details': 'Ver Detalles del Proyecto',
      'projects.view_code': 'Ver Código',
      'projects.coming_soon.title': 'Más Proyectos Próximamente',
      'projects.coming_soon.description': 'Estoy trabajando constantemente en proyectos nuevos y emocionantes. Mantente atento para más aplicaciones web innovadoras y soluciones creativas.',
      // Project individual page
      'breadcrumb.projects': 'Proyectos',
      'project.cube.breadcrumb': 'Cubo de Rubik 3D',
      'project.featured': 'Proyecto Destacado',
      'project.cube.title': 'Cubo de Rubik 3D Interactivo',
      'project.cube.hero_description': 'Un simulador completamente interactivo del cubo de Rubik 3D con física realista, animaciones suaves y algoritmos inteligentes de scrambling automático.',
      'project.view_github': 'Ver en GitHub',
      'project.live_demo': 'Demo En Vivo',
      'project.problem.title': 'El Desafío',
      'project.cube.problem': 'Crear un cubo de Rubik 3D realista que mantenga 60fps de rendimiento mientras maneja algoritmos complejos de rotación y gestión de estado para 27 cubos individuales con animaciones suaves.',
      'project.solution.title': 'La Solución',
      'project.cube.solution': 'Usé React Three Fiber para renderizado 3D optimizado, implementé funciones de easing personalizadas para animaciones suaves, y creé un sistema eficiente de gestión de estado con manipulación directa de objetos.',
      'project.features.title': 'Características Clave',
      'project.cube.features.smooth_rotations': 'Rotaciones Suaves',
      'project.cube.features.smooth_desc': 'Animaciones a 60fps con funciones de easing personalizadas para movimientos realistas del cubo',
      'project.cube.features.realistic_colors': 'Colores Realistas',
      'project.cube.features.colors_desc': 'Esquema de colores auténtico del cubo de Rubik con lógica correcta de coloración de caras',
      'project.cube.features.auto_scramble': 'Scrambling Automático',
      'project.cube.features.scramble_desc': 'Algoritmo inteligente de scrambling que crea configuraciones resolubles',
      'project.cube.features.orbit_controls': 'Controles de Órbita',
      'project.cube.features.controls_desc': 'Controles intuitivos de cámara para explorar el cubo desde cualquier ángulo',
      'project.cube.features.responsive': 'Diseño Responsivo',
      'project.cube.features.responsive_desc': 'Optimizado para todos los tamaños de pantalla desde móvil hasta escritorio',
      'project.cube.features.performance': 'Alto Rendimiento',
      'project.cube.features.performance_desc': 'Renderizado optimizado y gestión de estado para 60fps consistentes',
      'project.technical.title': 'Implementación Técnica',
      'project.technical.architecture': 'Arquitectura',
      'project.cube.tech.react_fiber': 'React Three Fiber para renderizado 3D',
      'project.cube.tech.state_management': 'Gestión eficiente de estado con useRef',
      'project.cube.tech.direct_manipulation': 'Manipulación directa de objetos Three.js',
      'project.cube.tech.custom_easing': 'Funciones de easing personalizadas para animaciones',
      'project.technical.highlights': 'Aspectos Destacados',
      'project.cube.highlights.60fps': 'Rendimiento consistente de 60fps',
      'project.cube.highlights.27_cubes': 'Gestión de 27 cubos individuales',
      'project.cube.highlights.smooth_transitions': 'Transiciones de rotación suaves',
      'project.cube.highlights.memory_efficient': 'Renderizado eficiente en memoria',
      'project.back_to_projects': 'Volver a Proyectos',
      'project.more_coming': '¡Más proyectos próximamente!'
    }
  };

  let currentLanguage = 'en'; // Default language

  // Initialize language system
  function initLanguage() {
    // Get saved language from localStorage
    const savedLanguage = localStorage.getItem('language');
    if (savedLanguage && translations[savedLanguage]) {
      currentLanguage = savedLanguage;
    }
    
    // Apply translations and update UI
    applyTranslations();
    updateLanguageUI();
  }

  // Apply translations to all elements with data-i18n attribute
  function applyTranslations() {
    const currentLang = translations[currentLanguage];
    if (!currentLang) return;
    
    document.querySelectorAll('[data-i18n]').forEach(element => {
      const key = element.getAttribute('data-i18n');
      if (key && currentLang[key]) {
        element.textContent = currentLang[key];
      }
    });
  }

  // Update language toggle buttons
  function updateLanguageUI() {
    const langCode = currentLanguage.toUpperCase();
    const currentLangEl = document.getElementById('current-language');
    const mobileLangEl = document.getElementById('mobile-current-language');
    
    if (currentLangEl) currentLangEl.textContent = langCode;
    if (mobileLangEl) mobileLangEl.textContent = langCode;
  }

  // Toggle language
  function toggleLanguage() {
    currentLanguage = currentLanguage === 'en' ? 'es' : 'en';
    localStorage.setItem('language', currentLanguage);
    applyTranslations();
    updateLanguageUI();
  }

  // Mobile menu functionality
  document.addEventListener('DOMContentLoaded', () => {
    // Initialize language system
    initLanguage();

    // Language toggle event listeners
    const languageToggle = document.getElementById('language-toggle');
    const mobileLanguageToggle = document.getElementById('mobile-language-toggle');
    
    languageToggle?.addEventListener('click', toggleLanguage);
    mobileLanguageToggle?.addEventListener('click', toggleLanguage);

    // Mobile menu functionality
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    const menuIcon = mobileMenuButton?.querySelector('svg path');
    
    let isMenuOpen = false;

    mobileMenuButton?.addEventListener('click', () => {
      isMenuOpen = !isMenuOpen;
      
      if (isMenuOpen) {
        // Open menu
        mobileMenu?.classList.remove('-translate-y-full', 'opacity-0', 'invisible');
        mobileMenu?.classList.add('translate-y-0', 'opacity-100', 'visible');
        
        // Change icon to X
        if (menuIcon) {
          menuIcon.setAttribute('d', 'M6 18L18 6M6 6l12 12');
        }
      } else {
        // Close menu
        mobileMenu?.classList.add('-translate-y-full', 'opacity-0', 'invisible');
        mobileMenu?.classList.remove('translate-y-0', 'opacity-100', 'visible');
        
        // Change icon back to hamburger
        if (menuIcon) {
          menuIcon.setAttribute('d', 'M4 6h16M4 12h16M4 18h16');
        }
      }
    });

    // Close menu when clicking on a link
    const mobileMenuLinks = mobileMenu?.querySelectorAll('a');
    mobileMenuLinks?.forEach(link => {
      link.addEventListener('click', () => {
        isMenuOpen = false;
        mobileMenu?.classList.add('-translate-y-full', 'opacity-0', 'invisible');
        mobileMenu?.classList.remove('translate-y-0', 'opacity-100', 'visible');
        
        // Reset icon
        if (menuIcon) {
          menuIcon.setAttribute('d', 'M4 6h16M4 12h16M4 18h16');
        }
      });
    });

    // Close menu when clicking outside
    document.addEventListener('click', (e) => {
      if (isMenuOpen && !mobileMenuButton?.contains(e.target as Node) && !mobileMenu?.contains(e.target as Node)) {
        isMenuOpen = false;
        mobileMenu?.classList.add('-translate-y-full', 'opacity-0', 'invisible');
        mobileMenu?.classList.remove('translate-y-0', 'opacity-100', 'visible');
        
        // Reset icon
        if (menuIcon) {
          menuIcon.setAttribute('d', 'M4 6h16M4 12h16M4 18h16');
        }
      }
    });
  });
</script>